<!DOCTYPE HTML>
<html>
  <script type="text/javascript" src="../libs/jQuery/jquery-2.1.1.min.js"></script>

  <head>
    <title>Test math</title>
    <style type="text/css">

      .fon {
        background-color: rgb(220,220,220);
      }

      .canv {
        background-color: white;
        margin: 10px auto 10px auto;
        width: 1024px;
        height: 600px;
        padding: 10px;
        outline: none;
        /*box-shadow: inset 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 0 rgba(0,0,0,.07);*/
        box-shadow: 0 0 10px rgba(0,0,0,.5);
      }

      .expr {
        color: black;
        position: absolute;
        /*margin-left: 100px;
        margin-top: 200px;*/
        /*width:20px;*/
        height: 20px;
      }

      #pointer {
        color: red;
        position: absolute;
        margin-left: 100px;
        margin-top: 200px;
        width:20px;
        height: 20px;
      }

    </style>
	
  </head>
  <body class="fon">
    <div id="ca" class="canv">
      <div id="pointer">+</div>
    </div>
  </body>
</html>

<script type="text/javascript">
  var isPrint = 0;

   $( "#ca" ).click( function(e) {
      
      //alert(e.pageX+ ' , ' + e.pageY);
      var posX = $(this).offset().left;
      var posY = $(this).offset().top;
      var innerX = e.pageX - posX - 16;
      var innerY = e.pageY - posY - 18;
      isPrint++;
     // $("#pointer").style.marginLeft = innerX+"px";
     //  $("#pointer").style.marginTop = innerY+"px";
    
    $("#pointer").css( { marginLeft : innerX+"px", marginTop : innerY+"px" } )
    var el = document.createElement("div");
    el.style.marginLeft = innerX+"px";
    el.style.marginTop = innerY+"px";
    el.className = "expr";
    el.id = "expr"+ isPrint;
    var wrap = document.getElementById("ca");
    wrap.appendChild(el);
      //var posX = $(this).position().left,posY = $(this).position().top;
      //alert( (e.pageX - posX) + ' , ' + (e.pageY - posY));
   });

$(document).keypress(function(e) {
        if ($(e.target).is('input, textarea')) {
            return;   
        }
        
        var ee = document.getElementById("expr"+isPrint);
        ee.textContent += String.fromCharCode(e.which);
        //alert(String.fromCharCode(e.which));
        //if (e.which === 119) alert('W pressed');
    });

</script>

<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-59740475-1', 'auto');
	  ga('send', 'pageview');

	</script>
