<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8" />
	<link rel="stylesheet" type="text/css" href="../style.css" />
  </head>

  
  <div class="wrap"> 
  	<h1>Material Design и AngularJS</h1>
    <a href="FrontEnd.html"><< Назад</a>
  	<h6>Категория: Front-End / Дата создания: 12.01.2015 / Последняя правка: 12.01.2015</h6>
  
    
    <p>
        Ни для кого не секрет, что Google повсюду в своих продуктах внедряет так называемый material design. Как и любой другой стиль он имеет сторонников и противников. Не буду касаться этих споров. Если вам нравится данный подход, Google подготовил полную спецификацию и описание особенностей: <a href="http://www.google.com/design/spec/material-design/introduction.html">Material Design</a>. <br/>
        <br/>
        Для любителей angularjs появилась <a href="https://material.angularjs.org/#/">библиотека </a> с набором директив, реализующих графические компоненты и позволяющих создавать разметку в соответствии с принципами material design. О ней и пойдет рассказ. <br/>
        <br/>
        Я постараюсь кратко показать некоторые особенности и недостатки, а также покажу небольшое <a href="http://nesterione.github.io/md-angular-demo/">приложение </a> для демонстрации.<br/>
        <br/>    
    </p>
   <img src="00004/image00.PNG"/>
   
   <h4>Что мы имеем?</h4><br/>
<i>1. Готовые компоненты:</i><br/>
<br/>
Множество готовых angularjs директив для различных компонентов: кнопок, переключателей, вкладок. Все перечислять не буду, все это хорошо освещено в <a href="https://material.angularjs.org/#/demo/material.components.button">документации</a>, покажу лишь основной принцип: <br/>
<br/>
Вам нужна круглая кнопка?<br/>
<br/>
<img src="00004/image01.PNG" alt="image"/><br/>
<br/>
Используем готовую директиву, т.е. пишем:<br/>
<br/>
<pre><code class="html"> &lt;md-button class=&quot;md-fab md-primary&quot; md-theme=&quot;cyan&quot; aria-label=&quot;Profile&quot;&gt;
      &lt;md-icon icon=&quot;/img/icons/ic_people_24px.svg&quot; style=&quot;width: 24px; height: 24px;&quot;&gt;&lt;/md-icon&gt;
 &lt;/md-button&gt;
</code></pre><br/>
Если нужно добавить всплывающую подсказку, тоже все предусмотрено:<br/>
<br/>
<pre><code class="html"> &lt;md-button class=&quot;md-fab md-primary&quot; md-theme=&quot;cyan&quot; aria-label=&quot;Profile&quot;&gt;
      &lt;md-icon icon=&quot;/img/icons/ic_people_24px.svg&quot; style=&quot;width: 24px; height: 24px;&quot;&gt;&lt;/md-icon&gt;
      &lt;md-tooltip&gt;
        Photos
      &lt;/md-tooltip&gt;
 &lt;/md-button&gt;
</code></pre><br/>
<br/>
Нужны переключатели?<br/>
<br/>
<img src="00004/image02.PNG" alt="image"/><br/>
<br/>
<pre><code class="html">&lt;div class=&quot;inset&quot; ng-controller=&quot;SwitchDemoCtrl&quot;&gt;
  &lt;md-switch ng-model=&quot;data.cb1&quot; aria-label=&quot;Switch 1&quot;&gt;
    Switch 1: {{ data.cb1 }}
  &lt;/md-switch&gt;
  &lt;md-switch ng-model=&quot;data.cb2&quot; aria-label=&quot;Switch 2&quot; ng-true-value=&quot;'yup'&quot; ng-false-value=&quot;'nope'&quot; class=&quot;md-warn&quot;&gt;
    Switch 2 (md-warn): {{ data.cb2 }}
  &lt;/md-switch&gt;
  &lt;md-switch ng-disabled=&quot;true&quot; aria-label=&quot;Disabled switch&quot;&gt;
    Switch (Disabled)
  &lt;/md-switch&gt;
  &lt;md-switch ng-disabled=&quot;true&quot; aria-label=&quot;Disabled active switch&quot; ng-model=&quot;data.cb4&quot;&gt;
    Switch (Disabled, Active)
  &lt;/md-switch&gt;
  &lt;md-switch class=&quot;md-primary&quot; md-no-ink aria-label=&quot;Switch No Ink&quot;&gt;
    Switch (md-primary): No Ink
  &lt;/md-switch&gt;
&lt;/div&gt;
</code></pre><br/>
Все это удобным образом связывается с данными:<br/>
<br/>
<pre><code class="javascript">.controller('SwitchDemoCtrl', function($scope) {
  $scope.data = {
    cb1: true,
    cb4: true
  };
});
</code></pre><br/>
Удобно? Конечно!.. Но только когда вам достаточно стандартных опций, которых не так уж и много. Заходите сделать какую-то особенность — и сразу все плюсы теряются.<br/>
<br/>
<i>2. Разметка </i><br/>
<br/>
Для того, чтобы создавать адаптивную разметку, предусмотрено почти все необходимое. Вы можете создавать колонки, строки, вкладывать эти элементы друг в друга. Можно указывать как отображаться элемента при разных размерах экранов, все это реализовано вполне удобно. Рекомендую ознакомиться с <a href="https://material.angularjs.org/#/layout/grid">примерами</a>. <br/>
<br/>
<i>3. Темы </i><br/>
<br/>
Еще одна особенность — возможность описывать темы. Темы можно менять динамически с помощью директив или в контроллере. Изначально темы уже описаны для всех основных цветов используемых в Material Design. <a href="https://material.angularjs.org/#/Theming/01_introduction">Подробнее</a>. <br/>
<br/>
<h4>Пример приложения</h4><br/>
Лучший способ понять преимущества и недостатки чего-либо — использовать это. Я сделал небольшой демонстрационный проект. Это небольшое приложение, здесь я не использовал удаленный REST сервис [соответственно, вносимые изменения нигде не отобразятся], чтобы сосредоточиться непосредственно на angularjs и возможностях material-angular.<br/>
<br/>
Я сделаю простой редактор, в котором можно, нажав на плавающую кнопку, добавить задание, выбрав которые можно отметить, после чего они будут перенесены в архив.<br/>
<br/>
<img src="00004/image03.PNG" alt="image"width="100%"/><br/>
<a href="http://nesterione.github.io/md-angular-demo/">live demo</a><br/>
<a href="https://github.com/nesterione/material-angular-demo-project/tree/habr">проект на github</a><br/>
<br/>
Для начала создадим angular проект на базе angular-seed. Здесь я не буду рассказывать про ngRroute и ngView, кто работал с angularjs — это знают (если не знакомы с angularjs, прошу <a href="https://angularjs.org/">сюда</a>). <br/>
 <br/>
Нам понадобится верхний toolbox:<br/>
<br/>
<img src="00004/image04.PNG" alt="image" width="100%"/><br/>
<br/>
Для этих целей предусмотрен соответствующий элемент: <br/>
<br/>
<pre><code class="html"> &lt;md-toolbar md-theme=&quot;indigo&quot; class=&quot;app-toolbar md-indigo-theme md-whiteframe-z2 fix-top&quot; &gt;
    &lt;div class=&quot;md-toolbar-tools&quot; tabindex=&quot;0&quot;&gt;
      &lt;md-button class=&quot;menu-icon nornal-btn&quot; ng-click=&quot;toggleRight()&quot; aria-label=&quot;Toggle Menu&quot;&gt;
        &lt;md-tooltip &gt;
          Меню
        &lt;/md-tooltip&gt;
        &lt;md-icon icon=&quot;img/icons/ic_menu_24px.svg&quot;&gt;&lt;/md-icon&gt;
      &lt;/md-button&gt;
      Список задач 
    &lt;/div&gt;
  &lt;/md-toolbar&gt;
</code></pre><br/>
Также нужно сделать слева выдвижное меню, для этого тоже все предусмотрено:<br/>
<br/>
<pre><code class="html"> &lt;md-sidenav class=&quot;md-sidenav-left md-whiteframe-z2&quot; md-component-id=&quot;left&quot;&gt;
    &lt;div ng-controller=&quot;LeftCtrl&quot; ng-click=&quot;close()&quot;&gt;
      &lt;md-toolbar md-theme=&quot;indigo&quot;&gt;
        &lt;h1 class=&quot;md-toolbar-tools&quot;&gt;Меню&lt;/h1&gt;
      &lt;/md-toolbar&gt;
      &lt;md-content &gt;
        &lt;a class=&quot;menu-item menu-sub-item md-menu-item&quot; ng-click=&quot;menu.toggleSelectPage(page)&quot; ng-repeat=&quot;page in menu.pages&quot; ng-href=&quot;#{{page.url}}&quot; md-highlight=&quot;menu.isPageSelected(page)&quot; md-ink-ripple=&quot;#bbb&quot;&gt;  
          &lt;span &gt; {{page.discription}} &lt;/span&gt; 
        &lt;/a&gt;
      &lt;/md-content&gt;
    &lt;/div&gt;
  &lt;/md-sidenav&gt;
</code></pre><br/>
Для управления открытием можем использовать следующий код:<br/>
<br/>
<pre><code class="javascript">.controller('MainCtrl', function($scope, $timeout, $mdSidenav) {
  $scope.toggleRight = function() {
    $mdSidenav('left').toggle();
  };
...
});
</code></pre><br/>
<br/>
Таким образом, мы получили основной каркас. Теперь наполнение — это часть, которая будет изменятся при переходе между страницами. Наш view, в котором я буду отображать список задач:<br/>
<br/>
<img src="00004/image05.PNG" alt="image"/><br/>
<br/>
Можно либо сразу отметить задачу как выполненную, либо при наведении на кружок появляется checkbox и мы можем отметить несколько записей одновременно, после выделения хотя бы одной записи верхний toolbox меняет свой вид. Поскольку основной toolbox находится не во view, то было принято решение просто выводить другой toolbox поверх заданного в каркасе.<br/>
<br/>
<img src="00004/image06.PNG" alt="image" width="100%"/><br/>
 <br/>
Добавление новых элементов. Было принято решение вызывать диалоговое окно, в котором можно задать параметры. <br/>
Тут я поясню некоторую особенность, которая позволяет очень гибко управлять окнами. Данным фреймворком можно создавать как простые окна, так и сложные: для этого создается отдельная html страница, которая является шаблоном для модального окна. <br/>
<br/>
<img src="00004/image07.PNG" alt="image"/><br/>
<br/>
При создании своего окна для управления создается контроллер, который будет обрабатывать и передавать данные из окна. <br/>
<br/>
<pre><code class="html"> &lt;div class=&quot;md-actions&quot; layout=&quot;row&quot;&gt;
    &lt;md-button ng-click=&quot;cancel()&quot;&gt;
     Отмена
    &lt;/md-button&gt;
    &lt;!-- Вот здесь выполняется передача данных с окна--&gt;
    &lt;md-button ng-click=&quot;answer(todo)&quot; class=&quot;md-primary&quot;&gt;
      Добавить
    &lt;/md-button&gt;
  &lt;/div&gt;
</code></pre><br/>
Код контроллера управляющего окном:<br/>
<br/>
<pre><code class="javascript">function DialogController($scope, $mdDialog) {
 ...

  $scope.hide = function() {
    $mdDialog.hide();
  };
  $scope.cancel = function() {
    $mdDialog.cancel();
  };
  $scope.answer = function(answer) {
    $mdDialog.hide(answer);
  };
}
</code></pre><br/>
Тогда само окно может вызываться в коде следующим образом:<br/>
<br/>
<pre><code class="javascript">$mdDialog.show({
      controller: DialogController,
      // вот здесь указывается путь к странице описывающей вид нашего модального окна
      templateUrl: 'dialog.tmpl.html', 
      targetEvent: ev,
    })
    .then(function(answer) {
    // answer это то что было передано из нашего окна 
    // и здесь происходит вся последующая обработка данных
});
</code></pre><br/>
Я не стал подробно описывать как все реализовано, чтобы не нагромождать кучей довольно простого кода, только выделил моменты, касающиеся material angular. Все остальное вы можете посмотреть на <a href="https://github.com/nesterione/material-angular-demo-project/tree/habr">github</a>.<br/>
<br/>
<h4>Впечатления и выводы</h4><br/>
Изначально я подумал, что появилась замечательная возможность разрабатывать angular приложения с material design, однако немного поработав могу однозначно сказать: использовать еще рано (на момент написания версия 0.6). Содержится множество мелких багов, некоторые элементы отображаются по-разному в различных браузерах и постоянно приходится подстраивать стили вручную.<br/>
<br/>
На данный момент множество проблем с отображением в различных браузерах. Проблем много (столкнулся при написании демонстрационного проекта), покажу только несколько (это примеры с официального сайта проекта, открытые в разных браузерах).<br/>
<br/>
Значки на кнопках:<br/>
<br/>
(Google Chrome):<br/>
<img src="00004/image08.PNG" alt="image"/><br/>
<br/>
(Internent Exprorer 11):<br/>
<img src="00004/image09.PNG" alt="image"/><br/>
<br/>
Диалоговые окна:<br/>
<br/>
(Google Chrome):<br/>
<img src="00004/image10.PNG" alt="image"/><br/>
<br/>
(Internent Exprorer 11):<br/>
<img src="00004/image11.PNG" alt="image"/><br/>
<br/>
Дальше показывать косяки, думаю, не имеет смысла, они есть, и их много, а это значит, что вам придется вручную все поправлять. <br/>
<br/>
Также к недостаткам можно отнести, что не сделано ничего дня поддержки различных анимаций. В Material Design много уделяют этому <a href="http://www.google.com/design/spec/animation/authentic-motion.html">вопросу </a>. Но все это придется делать именно вам.<br/>
<br/>
Пока сложно сказать, как скоро будут исправлены недостатки, но на данном этапе для использования angular material явно не готов.<br/>
<br/>
<h4>Ссылки</h4><br/>
<ul>
<li><a href="http://nesterione.github.io/md-angular-demo/">Мой демо проект</a> </li>
<li><a href="https://github.com/nesterione/material-angular-demo-project/tree/habr">Исходный код демо проекта</a> </li>
<li><a href="https://material.angularjs.org">Сайт проекта Material Angular</a> </li>
<li><a href="http://www.google.com/design/spec/material-design/introduction.html">Официальное описание принципов Material Design</a> </li>
</ul>
<br>
<br>
<a href="http://habrahabr.ru/post/247719/">Оригинал моей статьи на Habrahabr.ru</a>

			<div class="clear"></div>
 </div>
 
<link rel="stylesheet" href="../../libs/highlight/styles/default.css">
<script src="../../libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-59740475-1', 'auto');
    ga('send', 'pageview');

  </script>

</html>
